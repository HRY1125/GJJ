<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>经办人授权</title>
    <link rel="stylesheet" href="/css/agent.css" type="text/css">
    <script type="text/javascript" src="/js/agent.js"></script>
    <link rel="stylesheet" href="/layui/css/layui.css" type="text/css">
    <script src="/layui/layui.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>
<body>
    <input id="message" th:if="${message != null}" th:value="${message}" hidden="hidden">
    <script th:if="${message != null}">
        var data = $("#message").val();
        layui.use(['element','layer'], function(){
            var element = layui.element;
            var layer = layui.layer;

            layer.open({
                content: data
            })
        });
    </script>
<div id="div_form">
    <form id="form_main" class="layui-form" th:action="@{/agent/updateAgent}" method="post" th:object="${agent}">
        <input id="ipt_unitId" th:field="*{unitId}" th:hidden="hidden">

        <div class="layui-form-item">
            <label class="layui-form-label">单位登记号</label>
            <div class="layui-input-block">
                <input th:field="*{unitRegisterId}" autocomplete="off" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">经办人姓名</label>
            <div class="layui-input-block">
                <input type="text" th:field="*{agentName}" required  lay-verify="required" autocomplete="off" class="layui-input">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">经办人证件名称</label>
            <div class="layui-input-block">
                <select id="select1" th:field="*{agentPapersName}" required lay-verify="required" lay-filter="papers">
                    <option value=""></option>
                    <option th:selected="*{agentPapersName=='身份证'}" value="身份证">身份证</option>
                    <option th:selected="*{agentPapersName=='护照'}" value="护照">护照</option>
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">经办人证件号码</label>
            <div class="layui-input-block">
                <input id="agentPapersNum" type="text" th:field="*{agentPapersNum}" required lay-verify="required" autocomplete="off" class="layui-input">
                <span id="agentPapersNum_span" style="display: none;color: red"></span>
            </div>
        </div>

        <div th:if="*{agentPapersName=='护照'}">
            <script>
                $(function () {
                    $("#div_nation").css("display","block");
                    $("#ipt_nation").attr("required","required");
                });
            </script>
        </div>

        <div id="div_nation" class="layui-form-item" style="display: none">
            <label class="layui-form-label">国籍</label>
            <div class="layui-input-block">
                <input id="ipt_nation" type="text" th:field="*{nationality}" lay-verify="required" autocomplete="off" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">办公电话</label>
            <div class="layui-input-block">
                <input id="officePhone" type="text" th:field="*{officePhone}" required  lay-verify="required" autocomplete="off" class="layui-input">
                <span id="officePhone_span" style="display: none;color: red"></span>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">手机号码</label>
            <div class="layui-input-block">
                <input id="agentPhone" type="text" th:field="*{agentPhone}" required  lay-verify="required" autocomplete="off" class="layui-input">
                <span id="agentPhone_span" style="display: none;color: red"></span>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">经办人邮箱</label>
            <div class="layui-input-block">
                <input id="agentEmail" type="text" th:field="*{agentEmail}" required  lay-verify="required" autocomplete="off" class="layui-input">
                <span id="agentEmail_span" style="display: none;color: red"></span>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">用户类型</label>
            <div class="layui-input-block">
                <select id="select2" th:field="*{agentType}" required lay-verify="required" lay-filter="agentType">
                    <option value=""></option>
                    <option th:selected="*{agentType=='证书用户'}" value="证书用户">证书用户</option>
                    <option th:selected="*{agentType=='非证书用户'}" value="非证书用户">非证书用户</option>
                </select>
            </div>
        </div>

        <div th:if="*{agentType=='证书用户'}">
            <script>
                $(function () {
                    $("#div_ukey").css("display","block");
                    $("#ipt_ukey").attr("required","required");
                    $("#div_username").css("display","none");
                    $("#ipt_username").removeAttr("required");
                });
            </script>
        </div>

        <div th:if="*{agentType=='非证书用户'}">
            <script>
                $(function () {
                    $("#div_ukey").css("display","none");
                    $("#ipt_ukey").removeAttr("required");
                    $("#div_username").css("display","block");
                    $("#ipt_username").attr("required","required");
                });
            </script>
        </div>

        <div id="div_ukey" class="layui-form-item" style="display: none">
            <label class="layui-form-label">数字证书</label>
            <div class="layui-input-block">
                <input id="ipt_ukey" type="text" th:field="*{ukey}" required  lay-verify="required" autocomplete="off" class="layui-input">
            </div>
        </div>

        <div id="div_username" class="layui-form-item" style="display: none">
            <label class="layui-form-label">用户名</label>
            <div class="layui-input-block">
                <input id="ipt_username" type="text" th:field="*{agentUserName}" required  lay-verify="required" autocomplete="off" class="layui-input">
            </div>
        </div>

        <input id="inpt_submit" type="submit" class="layui-btn" value="确定">

    </form>
</div>
</body>
</html>